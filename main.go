/*
 * bit-test-results-exporter
 *
 * This protocol defines the API for **test-results-exporter** service in the **BIT** functionality.
 *
 * API version: 1.0.1
 * Generated by: Swagger Codegen (https://github.com/swagger-api/swagger-codegen.git)
 */
package main

import (
	sw2 "./internal/bit-indexer"
	sw1 "./internal/bit-test-results-exporter"
	"./server"
	"log"
)

func main() {

	log.Printf("Server started")

	router1 := sw1.NewRouter()
	router2 := sw2.NewRouter()

	srv1 := server.NewServer(router1, ":8080")
	srv2 := server.NewServer(router2, ":8081")

	//TODO: need to change to ListenAndServeTLS in order to support https
	go func() {
		err := srv1.ListenAndServe()
		if err != nil {
			log.Fatalln(err)
		}
	}()
	err := srv2.ListenAndServe()
	if err != nil {
		log.Fatalln(err)
	}
}
